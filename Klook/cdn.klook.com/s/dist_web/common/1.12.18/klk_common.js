!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.klk_common=t():e.klk_common=t()}(window,function(){return function(){var e={706:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"_array_like_to_array",{enumerable:!0,get:function(){return r}})},353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"_array_without_holes",{enumerable:!0,get:function(){return o}});var r=n("706");function o(e){if(Array.isArray(e))return(0,r._array_like_to_array)(e)}},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{_define_property:function(){return r},_:function(){return r}})},816:function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"_iterable_to_array",{enumerable:!0,get:function(){return r}})},175:function(e,t,n){"use strict";function r(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"_non_iterable_spread",{enumerable:!0,get:function(){return r}})},784:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{_object_spread:function(){return o},_:function(){return o}});var r=n("307");function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){(0,r._define_property)(e,t,n[t])})}return e}},652:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{_object_spread_props:function(){return r},_:function(){return r}});function r(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}},455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{_to_consumable_array:function(){return a},_:function(){return a}});var r=n("353"),o=n("816"),i=n("175"),u=n("264");function a(e){return(0,r._array_without_holes)(e)||(0,o._iterable_to_array)(e)||(0,u._unsupported_iterable_to_array)(e)||(0,i._non_iterable_spread)()}},264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"_unsupported_iterable_to_array",{enumerable:!0,get:function(){return o}});var r=n("706");function o(e,t){if(e){if("string"==typeof e)return(0,r._array_like_to_array)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,r._array_like_to_array)(e,t)}}},362:function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});var o=function e(t,n){var o=function(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var a in i){if(!!i[a])u+="; "+a,!0!==i[a]&&(u+="="+i[a].split(";")[0])}return document.cookie=e+"="+t.write(o,e)+u}};return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),u=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(r[a]=t.read(u,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){o(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},809:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{SessionChange:function(){return c},DefaultOpt:function(){return i},IhtDefaultOpt:function(){return u},GaDefaultOpt:function(){return a}});var r=n("784"),o=n("652"),i={ais:"_auto_init_session",_inner_init:!0,key:"klk_i_sn",renew:!1,cacheTime:18e5},u=o._(r._({},i),{type:0,ais:"_auto_init_session",key:"klk_i_sn",gaKey:"iht_fe_session_id"}),a=o._(r._({},i),{type:1,force:!1,ais:"_ga_auto_init_session",key:"klk_ga_sn",gaKey:"fe_session_id"}),c="sessionchange"},168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("307"),o=n("581"),i=n("739"),u=n("941"),a=n("809"),c=function(){var e=window.dataLayer||[];window.dataLayer=e,e.push({site_name:location.host,user_agent:navigator.userAgent});var t={};window.addEventListener(a.SessionChange,function(e){var n=e.args,o=e.changetype==a.GaDefaultOpt.type?a.GaDefaultOpt.gaKey:a.IhtDefaultOpt.gaKey,i=n&&n.session_id;i&&t[o]!==i&&(window.dataLayer.push(r._({},o,i)),t[o]=i)})};(0,o.tryCatch)(function(){c(),(0,u.initSession)(),(0,i.initHistoryChange)(),(0,u.historyChangeEvent)()})},739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ael:function(){return i},PushStateChange:function(){return c},ReplaceStateChange:function(){return f},PopStateChange:function(){return s},initHistoryChange:function(){return l}});var r=n("455"),o=n("581"),i=window.addEventListener.bind(window),u=!1,a=function(e,t){var n=new Event(e);n.args=t,window.dispatchEvent(n)},c="PushStateChange",f="ReplaceStateChange",s="PopStateChange",l=function(){if(!u){u=!0;var e=history.pushState,t=history.replaceState;history.pushState=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0,o.tryCatch)(function(){return a(c,n)}),e.call.apply(e,[history].concat(r._(n)))},history.replaceState=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,o.tryCatch)(function(){return a(f,n)}),t.call.apply(t,[history].concat(r._(n)))},i("popstate",function(e){a(s,[e])})}}},744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{event:function(){return o},constant:function(){return i},session:function(){return u},jsCookie:function(){return r.default},detectSpm:function(){return a.detectSpm}});var r=n.ir(n("362")),o=n.ir(n("739")),i=n.ir(n("809")),u=n.ir(n("941")),a=n("987");n("168")},941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{getCurrentSession:function(){return k},historyChangeEvent:function(){return C},initGaSession:function(){return m},getGaSession:function(){return w},initIhtSession:function(){return O},updateIhtSession:function(){return j},updateGaSession:function(){return P},GaDefaultOpt:function(){return c.GaDefaultOpt},IhtDefaultOpt:function(){return c.IhtDefaultOpt},DefaultOpt:function(){return c.DefaultOpt},isValid:function(){return b},getSessionInfo:function(){return y},getCurrentSessionInfo:function(){return D},generateSessionId:function(){return d},setSessionInfo:function(){return v},initSession:function(){return S}});var r=n("307"),o=n("784"),i=n.ir(n("362")),u=n("739"),a=n("581"),c=n("809"),f={},s={renew:!0},l={},p=function(){return Date.now()},d=function(){return Math.random().toString().slice(-10)},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=1===t?i.default.get(e):(0,a.tryCatch)(function(){return localStorage.getItem(e)}),r=n?n.split(".."):["",""];return{session_id:r[0],iht_last_event_time:parseInt(r[1])}},y=function(e){var t=_(e);return b(t)?t:_(e,2)},v=function(e,t){var n=[t.session_id,t.iht_last_event_time].join("..");i.default.set(e,n,{expires:new Date(p()+c.DefaultOpt.cacheTime)}),(0,a.tryCatch)(function(){return localStorage.setItem(e,n)})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e)return!1;var t=parseInt(e.iht_last_event_time||0),n=p()-t;return e.session_id&&n&&n<=c.DefaultOpt.cacheTime},g=function(e,t){var n=new Event(c.SessionChange);n.args=e,n.changetype=t,window.dispatchEvent(n)},h=function(e){var t=e.key,n=e.renew;try{var r=y(t),o=p();if(b(r)){if(n){var i=r.iht_last_event_time;r.iht_last_event_time=o,o-i>6e4?v(t,r):!l[t]&&(l[t]=!0,v(t,r),setTimeout(function(){l[t]=!1},3e3)),g(r,e.type)}}else r={iht_last_event_time:o,session_id:d()},v(t,r),g(r,e.type);return r}catch(e){}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},c.IhtDefaultOpt,e);if(!1!==window[c.DefaultOpt.ais]){var n=h(t);return f.iht=n,n}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},c.GaDefaultOpt,e);if(!1!==window[c.GaDefaultOpt.ais]){var n=h(t);return f.ga=n,n}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O(o._({},s,e))},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(o._({},s,e))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f.ga;return!e.force&&t&&t.session_id?t:m(o._({},s,e))},S=function(){j(s),P(s)},C=function(){(0,u.ael)(u.PushStateChange,function(){return P()}),(0,u.ael)(u.ReplaceStateChange,function(){return P()})},D=function(){return{ga:w(),iht:O()}},k=function(){var e;return e={},r._(e,c.GaDefaultOpt.gaKey,(w()||{}).session_id),r._(e,c.IhtDefaultOpt.gaKey,(O()||{}).session_id),e}},987:function(e,t,n){"use strict";function r(e){(e||!r.ok)&&!function(e,t,n){try{var o=t.querySelector("["+n.p+"]"),i=e[n.d]||[];o&&(o=o.dataset.spmPage||"")&&(o=o.split("?")[0])&&i.push({spm:o})&&(e[n.d]=i)&&(r.ok=!0)}catch(e){n.c.info(e)}}(window,document,{d:"dataLayer",c:console,p:"data-spm-page"})}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectSpm",{enumerable:!0,get:function(){return r}})},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"tryCatch",{enumerable:!0,get:function(){return r}});var r=function(e){try{return e()}catch(e){}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return!function(){function e(t){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(e=function(e){return e?r:n})(t)}n.ir=function(t,n){if(!n&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=e(n);if(r&&r.has(t))return r.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&Object.prototype.hasOwnProperty.call(t,u)){var a=i?Object.getOwnPropertyDescriptor(t,u):null;a&&(a.get||a.set)?Object.defineProperty(o,u,a):o[u]=t[u]}return o.default=t,r&&r.set(t,o),o}}(),n("744")}()});
//# sourceMappingURL=klk_common.js.map